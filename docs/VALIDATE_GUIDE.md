# 如何利用 validate 命令提升翻譯品質

`validate` 命令是本專案的品質核心，也是確保翻譯成果專業、可靠的關鍵工具。本章節將深入說明為何您需要它，以及如何善用它來完善您的翻譯。

## 為什麼我們需要 `validate`？

大型語言模型 (LLM) 雖然強大，但在處理如技術文件這類高度結構化的內容時，並非完美無缺。它們可能會在翻譯過程中，不經意地產生一些難以察覺的錯誤：

1.  **結構不一致 (Structural Inconsistency)**
    模型可能會「創造」新的標題，或在合併段落時「遺漏」整個章節，導致譯文的目錄與原文對不上。

2.  **程式碼被汙染 (Code Contamination)**
    最嚴重的問題之一。模型可能會翻譯程式碼中的變數、函式名稱，或是在程式碼區塊中加入譯註，這些都會導致程式碼範例無法執行，失去參考價值。

3.  **特殊語法錯誤 (Special Syntax Errors)**
    Laravel 文件使用特定的 Markdown 語法來產生提示區塊，例如 `[!NOTE]` 和 `[!WARNING]`。模型有時會將其視為一般文字而錯誤地翻譯，或在 `[` 前加上反斜線 `\` 進行轉義，導致樣式跑版。

如果沒有工具輔助，單靠人工校對要從上百個檔案中找出這些細微錯誤，無疑是大海撈針。`validate` 命令正是為了解決這個問題而生，它扮演著自動化品管員的角色，為您的翻譯品質把關。

## 報告包含什麼？

執行 `laradoc-trans validate --branch <your-branch>` 後，您會在 `workspace/validate-report/` 目錄下找到報告。

### 1. `SUMMARY.md` (總結報告)

這份檔案是您的品管儀表板，它以表格形式提供了所有檔案的驗證結果總覽，讓您能一目了然地掌握整體品質狀況。

**範例：**
```markdown
# 驗證總結報告

**分支:** `11.x`
**報告生成時間:** `2025-09-25 14:30:00 UTC`

---

## 序言與章節比較

| 檔案                 | 序言驗證 | 章節驗證 | 備註                                 |
| :------------------- | :-----: | :-----: | :----------------------------------- |
| `cache.md`           | ✅      | ❌     | 缺失章節數量有 2 個 , 缺失錨點有 1 個  |
| `collections.md`     | ✅      | ✅     |                                      |
| `queues.md`          | ❌      | ❌     | 序言結構與來源不符，無法驗證           |

---

## 內容細節驗證

| 檔案                 | 程式碼區塊  | 行內程式碼  | 特殊標記  |
| :------------------- | :--------: | :--------: | :------: |
| `cache.md`           | ❌         | ✅        | ✅       |
| `collections.md`     | ✅         | ✅        | ✅       |
| `helpers.md`         | ✅         | ❌        | ❌       |
```
> 從上表可以快速得知 `cache.md` 的章節和程式碼區塊有問題，而 `queues.md` 因序言結構錯誤導致無法進行後續驗證。

### 2. `details/` (詳細報告)

當 `SUMMARY.md` 中出現 ❌ 時，您就必須進入 `details/` 目錄，開啟對應的詳細報告來追查問題根源。這份報告會精確指出問題類型、所在章節，並提供原文與譯文的內容比對。

**範例：**
```markdown
# 驗證報告：cache.md

## 章節：「Obtaining a Cache Instance」(來源檔案第 55 行開始)

### 程式碼區塊不符
- **問題**: 內容不符 (區塊 1/1)
- **原文 (來源檔案第 58 行開始)**:
  ```php
  use Illuminate\Support\Facades\Cache;
  Route::get('/cache', function () {
      $value = Cache::get('key');
      //
  });
  ```
- **譯文不符(譯文檔案第 60 行開始)**:
  ```php
  use Illuminate\Support\Facades\Cache;
  Route::get('/cache', function () {
      // 譯註：從快取中獲取 'key' 的值
      $value = Cache::get('key');
      //
  });
  ```
```
> 上例清楚地顯示，譯文的程式碼區塊中被錯誤地加入了一行「譯註」，這就是需要修正的地方。

## 如何根據報告修正錯誤？

您的修正工作流程應該如下：

1.  **查看總結**: 首先開啟 `workspace/validate-report/SUMMARY.md`，找出所有被標記為 ❌ 的檔案。
2.  **分析細節**: 進入 `details/` 目錄，開啟對應的詳細報告，了解問題的具體原因和位置。
3.  **手動修正**: 根據詳細報告的提示，直接前往 `workspace/repo/target/` 目錄下，用您的編輯器開啟對應的翻譯檔案並修正錯誤。
4.  **再次驗證**: 修正完成後，再次執行 `validate` 命令。重複此流程，直到 `SUMMARY.md` 中的所有項目都顯示為 ✅。

透過這個嚴謹的「驗證 → 修正 → 再驗證」循環，您可以有系統地、有效率地確保每一份翻譯文件在結構和內容上都與原文保持高度一致，大幅提升最終的翻譯品質與專業度。
